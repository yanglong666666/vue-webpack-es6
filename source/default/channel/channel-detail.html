---
title: 渠道管理
layout: default
class: channel
---

<div class="channel-content">
  <a class="back-btn" href="{{ site.baseurl }}/default/channel/marketing-manage.html">&lt;返回</a>
  <div class="channel-item">
    <span class="name">渠道所属营业部：</span>
    <div class="channel-inner">
      <label class="w-300"><input type="text" class="txt"></label>
    </div>
  </div>
  <div class="line"></div>
  <div class="channel-item">
    <span class="name">状态：</span>
    <div class="channel-inner">
      <label class="w-150"><input class="status" name="status" type="radio">有效</label>
      <label class="w-150"><input class="status" name="status" type="radio">无效</label>
    </div>
  </div>
  <div class="channel-item">
    <span class="name">渠道短码：</span>
    <div class="channel-inner">
      <label class="w-300"><input type="text" class="txt"></label>
    </div>
  </div>
  <div class="channel-item">
    <span class="name">渠道名称：</span>
    <div class="channel-inner">
      <label class="w-300"><input type="text" class="txt"></label>
      <span class="info">此渠道名称已存在！</span>
    </div>
  </div>
  <div class="channel-item">
    <span class="name">合作机构：</span>
    <div class="channel-inner">
      <select name="" id="cooperation_list" class="diy-select" style="display: none;">
        <option selected="" value="1">合作机构1</option>
        <option value="2">合作机构2</option>
      </select>
    </div>
  </div>
  <div class="channel-item">
    <span class="name">营销人员：</span>
    <div class="channel-inner">
      <label class="w-300"><input type="text" class="txt" id="username" autocomplete="off"></label>
      <a href="javascript:void(0)" class="query-btn">查询</a>
      <div class="queryname-list">
        <ul>
          <li>002 ——  <span class="input-show">李冰</span> —— 13656666666</li>
          <li>002 ——  <span class="input-show">李作作</span> —— 13656666666</li>
          <li>002 ——  <span class="input-show">李爱爱</span> —— 13656666666</li>
          <li>002 ——  <span class="input-show">李傻傻</span> —— 13656666666</li>
          <li>002 ——  <span class="input-show">李呆呆</span> —— 13656666666</li>
          <li>002 ——  <span class="input-show">李笨笨</span> —— 13656666666</li>
        </ul>

      </div>


      <table cellpadding="0" cellspacing="0" class="user-table" style="display: none;">
        <tbody>
          <tr>
            <td>姓名：</td>
            <td>李冰</td>
          </tr>
          <tr>
            <td>手机号：</td>
            <td>18911110000</td>
          </tr>
          <tr>
            <td>所属营业部：</td>
            <td>上海南路营业部</td>
          </tr>
          <tr>
            <td>员工号：</td>
            <td>A122333</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="channel-item">
    <span class="name">开户营业部：</span>
    <div class="channel-inner">
      <div class="department-content">
        <div class="item">
          <label class="w-170 mr-30"><input type="text" class="txt" value="上海南路营业部"></label>
          <span>
            <select name="" id="department1" class="diy-select" style="display: none;">
              <option selected="" value="1">0001-万分之三佣金</option>
              <option value="2">0001-万分之五佣金</option>
            </select>
          </span>
          <a class="delete-btn" href="javascript:void(0)">删除</a>
        </div>
        <div class="item">
          <label class="w-170 mr-30"><input type="text" class="txt" value="上海南路营业部"></label>
          <span>
            <select name="" id="department2" class="diy-select" style="display: none;">
              <option selected="" value="1">0001-万分之三佣金</option>
              <option value="2">0001-万分之五佣金</option>
            </select>
          </span>
          <a class="delete-btn" href="javascript:void(0)">删除</a>
        </div>
      </div>
      <a class="add-department" href="javascript:void(0)"><i></i>添加</a>
    </div>
  </div>
  <div class="channel-item">
    <span class="name">存管银行：</span>
    <div class="channel-inner">
      <div class="bank-content">
        <div class="item">
          <label class="w-170"><input type="text" class="txt" value="中国工商银行"></label>
          <a class="delete-btn" href="javascript:void(0)">删除</a>
        </div>
        <div class="item">
          <label class="w-170"><input type="text" class="txt" value="中国工商银行"></label>
          <a class="delete-btn" href="javascript:void(0)">删除</a>
        </div>
        <div class="item">
          <label class="w-170"><input type="text" class="txt" value="中国工商银行"></label>
          <a class="delete-btn" href="javascript:void(0)">删除</a>
        </div>
        <div class="item">
          <label class="w-170"><input type="text" class="txt" value="中国工商银行"></label>
          <a class="delete-btn" href="javascript:void(0)">删除</a>
        </div>
      </div>
      <a class="add-bank" href="javascript:void(0)"><i></i>添加</a>
    </div>
  </div>
  <div class="ui-option">
    <div class="alllistname" id="partment_content">
      <h3>营业部：</h3>
      <div class="search-box" style="display:none;">
        <label class="search-label" for="">
          <input type="text" name="" value="" class="search-input">
        </label>
      </div>
      <div class="content-name" id="attr-list">
        <div class="attr-panl">
          <a href="javascript:void(0)" class=""><span class="param-checkbox"></span>全部</a>
          <a href="javascript:void(0)" class=""><span class="param-checkbox"></span>北京营业部</a>
          <a href="javascript:void(0)" class=""><span class="param-checkbox"></span>北京营业部</a>
          <a href="javascript:void(0)" class=""><span class="param-checkbox"></span>北京营业部</a>
          <a href="javascript:void(0)" class=""><span class="param-checkbox"></span>北京营业部</a>
          <a href="javascript:void(0)" class=""><span class="param-checkbox"></span>北京营业部</a>
          <a href="javascript:void(0)" class=""><span class="param-checkbox"></span>北京营业部</a>
          <a href="javascript:void(0)" class=""><span class="param-checkbox"></span>北京营业部</a>
        </div>
      </div>
        <div class="option-name">
          <a class="more" href="javascript:void(0)">更多
            <span class=""></span>
          </a>
        </div>
    </div>
  </div>
  <div class="ui-option">
    <div class="alllistname" id="type_content">
      <h3>类型：</h3>
      <div class="search-box" style="display:none;">
        <label class="search-label" for="">
          <input type="text" name="" value="" class="search-input">
        </label>
      </div>
      <div class="content-name" id="attr-list">
        <div class="attr-panl">
          <label><input name="radio" type="radio">类型类型</label>
          <label><input name="radio" type="radio">类型类型</label>
          <label><input name="radio" type="radio">类型类型</label>
          <label><input name="radio" type="radio">类型类型</label>
          <label><input name="radio" type="radio">类型类型</label>
          <label><input name="radio" type="radio">类型类型</label>
          <label><input name="radio" type="radio">类型类型</label>
          <label><input name="radio" type="radio">类型类型</label>
        </div>
      </div>
        <div class="option-name">
          <a class="more" href="javascript:void(0)">更多
            <span class=""></span>
          </a>
        </div>
    </div>
  </div>
  <div class="logo-upload">
    <div class="channel-item">
      <span class="name">logo：</span>

      <div class="channel-inner">
        <label class="w-300"><input type="text" class="txt" id=""></label>
        <span class="must"></span>
        <span class="file-upload">
           <a href="javascript:void(0)" class="query-btn">上传</a>
          <input class="file-input" type="file">
        </span>
        <div class="pic-tips">图片高度不超过74px，大小不超过1M</div>
        <div class="pic-show">
          <img src="../../images/logo/swsc.png" rel="">
        </div>

      </div>
    </div>
    <div class="channel-item">
      <span class="name">页面主图：</span>
      <div class="channel-inner">
        <label class="w-300"><input type="text" class="txt"></label>
        <span class="must">*</span>
        <span class="file-upload">
           <a href="javascript:void(0)" class="query-btn">上传</a>
          <input class="file-input" type="file">
        </span>
        <div class="pic-tips">尺寸为720*580，大小不超过1M</div>
        <div class="pic-show">
          <img src="../../images/khsx.png" rel="">
        </div>
      </div>
    </div>
    <div class="channel-item">
      <span class="name">图文内容：</span>
      <div class="channel-inner">
        <label class="w-300"><input type="text" class="txt"></label>
        <span class="must"></span>
        <span class="file-upload">
           <a href="javascript:void(0)" class="query-btn">上传</a>
          <input class="file-input" type="file">
        </span>


        <div class="pic-tips">图片宽度不超过514px，大小不超过1M</div>
        <div class="pic-show">
          <img src="../../images/banner.jpg" rel="">
        </div>
      </div>
    </div>
  </div>
<script type="text/javascript">
  $(function () {
    var pid = window.location.search.split('=')[1];
    $("input[type='file'].file-input").change(function () {
      //alert(1)
      console.log($(this).val())
    })
  })
</script>





  <div class="button-content">
    <a class="btn btn-primary btn-lg" href="{{ site.baseurl }}/default/channel/marketing-manage.html">取消</a>
    <button class="btn btn-fill btn-lg ml-30">保存</button>
  </div>
</div>
<script type="text/javascript">
  $(function(){
    $('#method_list').diySelect({width: '280px'});
    $('#cooperation_list').diySelect({width: '280px'});
    $('#department1').diySelect();
    $('#department2').diySelect();
    $('.department-content').on('click', '.delete-btn', function(event) {
      //删除营业部
      event.preventDefault();
      /* Act on the event */
      $(this).parent().remove();
    });
    $('.bank-content').on('click', '.delete-btn', function(event) {
      //删除银行
      event.preventDefault();
      /* Act on the event */
      $(this).parent().remove();
    });
    $('.channel-inner').on('click', '.add-bank', function(event) {
      //新增银行
      event.preventDefault();
      /* Act on the event */
      var add_bank_screen = new Dialog(null,{
          title: '添加存管银行',
          width: '560',
          needDestroy: true,
          hasBtn: true,
          btnText: ["取消","确定"],
          btnRole: ['cancel','confirm'],
          btnCls: ['cancel', 'confirm'],
          confirm: function() {
            //确定按钮事件
            add_bank_screen.hide();
          },
          content: '<div class="dialog-content-channel">'+
                      '<label><input type="checkbox" name="all">全选</label>'+
                      '<label><input type="checkbox" name="bank">中国工商银行</label>'+
                      '<label><input type="checkbox" name="bank">中国工商银行</label>'+
                      '<label><input type="checkbox" name="bank">中国工商银行</label>'+
                      '<label><input type="checkbox" name="bank">中国工商银行</label>'+
                      '<label><input type="checkbox" name="bank">中国工商银行</label>'+
                      '<label><input type="checkbox" name="bank">中国工商银行</label>'+
          '</div>'
        });
    });
    $('.channel-inner').on('click', '.add-department', function(event) {
      //新增银行
      event.preventDefault();
      /* Act on the event */
      var add_department_screen = new Dialog(null,{
          title: '添加开户营业部',
          width: '560',
          needDestroy: true,
          hasBtn: true,
          btnText: ["取消","确定"],
          btnRole: ['cancel','confirm'],
          btnCls: ['cancel', 'confirm'],
          confirm: function() {
            //确定按钮事件
            add_department_screen.hide();
          },
          content: '<div class="dialog-content-channel">'+
                      '<label><input type="checkbox" name="all">全选</label>'+
                      '<label><input type="checkbox" name="department">上海南路营业部</label>'+
                      '<label><input type="checkbox" name="department">上海南路营业部</label>'+
                      '<label><input type="checkbox" name="department">上海南路营业部</label>'+
                      '<label><input type="checkbox" name="department">上海南路营业部</label>'+
                      '<label><input type="checkbox" name="department">上海南路营业部</label>'+
                      '<label><input type="checkbox" name="department">上海南路营业部</label>'+
          '</div>'
        });
    });
    $('.channel-inner').on('click', '.query-btn', function(event) {
      //查询按钮事件
      event.preventDefault();
      event.stopPropagation();
      /* Act on the event */
      if ($('#username').val() != "") {
        $('.user-table').show();
        $(".queryname-list").hide();
      }
    });
    $('.attr-panl').find('a').click(function() {//多选选中状态
      if($(this).hasClass('current')) {
        $(this).removeClass('current');
      } else {
        $(this).addClass('current');
      }
    });
    var flag = true;//营业部
    var status = true;
    $('#partment_content').on('click', '.more', function(event) {//营业部多选更多和收起的切换
      event.preventDefault();
      /* Act on the event */
      if(flag) {
        $(this).html('收起 ').append('<span class="ico-arrow"></span>');
        $('#partment_content').addClass('active');
        $('#partment_content').find('.search-box').show();
        flag = false;
      } else {
        $(this).html('更多 ').append('<span class=""></span>');
        $('#partment_content').removeClass('active');
        $('#partment_content').find('.search-box').hide();
        flag = true;
      }
    });
    $('#type_content').on('click', '.more', function(event) {//更多和收起的切换
      event.preventDefault();
      /* Act on the event */
      if(status) {
        $(this).html('收起 ').append('<span class="ico-arrow"></span>');
        $('#type_content').addClass('active');
        $('#type_content').find('.search-box').show();
        status = false;
      } else {
        $(this).html('更多 ').append('<span class=""></span>');
        $('#type_content').removeClass('active');
        $('#type_content').find('.search-box').hide();
        status = true;
      }
    });

    //营销人员查询列表鼠标悬浮事件
    $(".queryname-list ul li").hover(function () {
      $(this).addClass("hover-on");
      $(this).append("<em>√</em>");

    },function () {
      $(this).removeClass("hover-on");
      $(this).find("em").remove();

    });
    //营销人员输入框输入事件
    $("#username").on("input",function (e) {
      e.preventDefault();
      e.stopPropagation();

      var _this = $(this);
      var _this_val = _this.val();
      _this.parent().siblings('.user-table').hide();
      _this.parent().siblings(".queryname-list").show();
      var _all_li = _this.parent().siblings(".queryname-list").find("li");
      _all_li.hide();
      _all_li.each(function (i,e) {
        var _txt = $(e).text();
        if(_txt.indexOf(_this_val) > -1){
          $(e).show();

        }
      });
    });
    //营销人员列表点击选择时间
    $(".queryname-list li").on("click",function (e) {
      e.preventDefault();
      e.stopPropagation();
      var _this = $(this);
      var show_val = _this.find(".input-show").html();
      _this.parents(".channel-inner").find("#username").val(show_val);
      $(".queryname-list").hide();
      _this.parents(".queryname-list").siblings('.user-table').show();

    })
    //营销人员输入框聚焦事件
    $("#username").on("focus",function (e) {
      e.preventDefault();
      e.stopPropagation();
      $(this).parent().siblings('.user-table').hide();
      $(this).parent().siblings(".queryname-list").show();
    });
    //营销人员输入框点击事件（无具体作用，防止点击输入框时document事件也会被触发）
    $("#username").click(function (e) {
      e.preventDefault();
      e.stopPropagation();
    });
    //点击任意一处使列表隐藏
    // $(document).click(function (e) {
    //   e.preventDefault();
    //   e.stopPropagation();
    //   $(".queryname-list").hide();
    // });



  });
</script>
