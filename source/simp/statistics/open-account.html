---
title: 开户总数
layout: default
class: open-account-plus
---

<div class="channel-cont">
  <span>数据范围：</span>
  <span class="channel-option">全部渠道</span>
  <a href="#" class="edit-channel">修改</a>
</div>
<div class="main-content usernum-content">
	<table>
    <tbody>
      <tr>
        <td class="tody">
          <p>356</p>
          <h2>今日注册人数</h2>
        </td>
        <td class="tody">
          <p>356</p>
          <h2>今日注册人数</h2>
        </td>
        <td class="month">
          <p>356</p>
          <h2>今日注册人数</h2>
        </td>
        <td class="month">
          <p>356</p>
          <h2>今日注册人数</h2>
        </td>
        <td class="sum">
          <p>356</p>
          <h2>今日注册人数</h2>
        </td>
        <td class="sum">
          <p>356</p>
          <h2>今日注册人数</h2>
        </td>
      </tr>
    </tbody>
  </table>
  <div class="refresh-content">
    <span>数据截止日期：2015-01-01 11:11:11</span>
    <a class="btn-primary btn-lw refresh-btn" href="#">刷新</a>
  </div>
</div>
<div class="main-content">
	{% include component/search.html %}
  <div id="all_search_list" style="">
    <div class="ui-option">
      <div class="alllistname" id="partment_content">
        <h3>营业部</h3>
        <div class="search-box" style="display:none;">
          <label class="search-label" for="">
            <input type="text" name="" value="" class="search-input">
          </label>
        </div>
        <div class="content-name" id="attr-list">
          <div class="attr-panl">
            <a href="javascript:void(0)" class=""><span class="param-checkbox"></span>全部</a>
            <a href="javascript:void(0)" class=""><span class="param-checkbox"></span>北京营业部</a>
            <a href="javascript:void(0)" class=""><span class="param-checkbox"></span>北京营业部</a>
            <a href="javascript:void(0)" class=""><span class="param-checkbox"></span>北京营业部</a>
            <a href="javascript:void(0)" class=""><span class="param-checkbox"></span>北京营业部</a>
            <a href="javascript:void(0)" class=""><span class="param-checkbox"></span>北京营业部</a>
            <a href="javascript:void(0)" class=""><span class="param-checkbox"></span>北京营业部</a>
            <a href="javascript:void(0)" class=""><span class="param-checkbox"></span>北京营业部</a>
            <a href="javascript:void(0)" class=""><span class="param-checkbox"></span>北京营业部</a>
            <a href="javascript:void(0)" class=""><span class="param-checkbox"></span>北京营业部</a>
          </div>
        </div>
        <div class="option-name">
          <a class="more" href="javascript:void(0)">更多
            <span class=""></span>
          </a>
        </div>
      </div>
      <div class="algin-center">
        <button class="btn-fill btn-lg" href="#">查询</button>
      </div>
    </div>
  </div>
  <div class="align-right">
    <button class="btn-primary" href="#">输出报表</button>
  </div>
</div>
<div id="open_account" style="height:600px"></div>
</div>
<script src="../../javascript/highcharts.js" type="text/javascript"></script>
<script src="../../javascript/exporting.js" type="text/javascript"></script>
<script type="text/javascript">
  $(function () {
    $('.channel-cont').on('click', '.edit-channel', function(event) {
      event.preventDefault();
      /* Act on the event */
      var channel_screen = new Dialog(null,{
        title: '渠道选择',
        width: '550',
        needDestroy: true,
        hasBtn: true,
        btnText: ["取消","确定"],
        btnRole: ['cancel','confirm'],
        btnCls: ['cancel','confirm'],
        confirm: function() {
          //确定按钮事件
          channel_screen.hide();
        },
        content: '<div class="dialog-content-channel-select">'+
                  '<div class="form-group-reg">'+
                    '<span class="label">渠道范围</span>'+
                    '<div class="select-parent">'+
                      '<select class="diy-select" name="type" id="own_parent">'+
                        '<option value="0">请选择</option>'+
                        '<option value="1">工商银行</option>'+
                        '<option value="2">招商银行</option>'+
                      '</select>'+
                    '</div>'+
                  '</div>'+
                  '<div class="add-option-pop" id="team_pop">'+
                    '<div class="option-search">'+
                      '<span class="label">渠道搜索</span>'+
                      '<input type="text" class="search-input">'+
                      '<a class="btn btn-fill" href="#">查找</a>'+
                    '</div>'+
                    '<div class="option-box">'+
                      '<ul class="option-list">'+
                        '<li>'+
                          '<label class="all_checked"><input type="checkbox"><em></em>全部</label>'+
                        '</li>'+
                        '<li>'+
                        '<label><input type="checkbox"><em class="on"></em><span class="cont">杭州文1路营业部</span></label>'+
                        '</li>'+
                        '<li>'+
                        '<label><input type="checkbox"><em></em><span class="cont">杭州文2路营业部</span></label>'+
                        '</li>'+
                        '<li>'+
                        '<label><input type="checkbox"><em></em><span class="cont">杭州文3路营业部</span></label>'+
                        '</li>'+
                      '</ul>'+
                    '</div>'+
                  '</div>'+
                '</div>'
      });
      $('.diy-select').diySelect();
    });
    //这里根据选中值调用接口查询数据回来,
    var array = [
      {
        value:'西南证券',
        key:10,
        parent_id:0,
        type : 1
        },
      {
        value:'浙江营业部',
        key:101,
        parent_id:10,
        type : 1
      },
      {
        value:'南京营业部',
        key:102,
        parent_id:10,
        type : 1
      },
      {
        value:'工商银行',
        key:199,
        parent_id:0,
        type : 2
      },
      {
        value:'浙江分行',
        key:1199,
        parent_id:199,
        type : 2
      },
      {
        value:'杭州支行',
        key:11199,
        parent_id:1199,
        type : 2
      },
      {
        value:'滨江网点',
        key:111199,
        parent_id:11199,
        type : 2
      },
      {
        value:'江苏分行',
        key:1299,
        parent_id:199,
        type : 2
      },
      {
        value:'南京支行',
        key:12199,
        parent_id:1299,
        type : 2
      },
      {
        value:'玄武网点',
        key:121199,
        parent_id:121199,
        type : 2
        }];
    $(document).on('change', '#own_parent',function () {
      var index = $(this).val();
      array['own_parent0'] = [];
      $(this).parent().find('.next-select').remove();
      for (var i in array) {
        if (array[i].type == index && array[i].parent_id == 0 ) {
          array['own_parent0'].push({'key': array[i].key, 'value': array[i].value});
        }
      }
      // if ($(this).val() == 3) {//如果选择的是其他的话，那么就显示出查询输入框
      //   var childHtml = '<span class="next-select"><label class="w-170"><input placeholder="请输入上级帐号" type="text" class="txt" id="own_parent0"></label>';
      //   $(this).parent().append(childHtml);
      // } else
      if (array['own_parent0'].length == 0) {//如果选择的是证劵或者合作方的话，但是查询出的下级为空，就不操作
        return;
      } else {
        var childHtml = '<span class="next-select"><select class="diy-select input-l"id="own_parent0"><option>请选择</option>';
        for (var i in array['own_parent0']) {
          childHtml +=
            '<option value="' + array['own_parent0'][i].key + '">' + array['own_parent0'][i].value + '</option>';
        }
        $(this).parent().append(childHtml);
        $('.diy-select').diySelect();
      }
    })
    $(document).on('change', '.form-group-reg .next-select select', function () {
      var index = $(this).val();
      var select_index = $('.form-group-reg .next-select').length;//这个代表第几行数据
      array['own_parent' + select_index] = [];
      $(this).parent().nextAll().remove();
      for (var i in array) {
        if (array[i].parent_id + "" === index) {
          array['own_parent' + select_index].push({'key': array[i].key, 'value': array[i].value});
        }
      }
      if (array['own_parent' + select_index].length == 0) {//如果选择的是证劵或者合作方的话，但是查询出的下级为空，就不操作
        return;
      } else {
        var childHtml = '<span class="next-select"><select class="diy-select input-l" id="own_parent' + select_index + '"><option>请选择</option>';
        for (var i in array['own_parent' + select_index]) {
          childHtml +=
            '<option value="' + array['own_parent' + select_index][i].key + '">' + array['own_parent' + select_index][i].value + '</option>';
        }
        $(this).parents('.select-parent').append(childHtml);
        $('.diy-select').diySelect();
      }

    })
    //渠道选择交互
    $(document).on("click",".add-option-pop .option-list label",function (e) {
      e.preventDefault();
      e.stopPropagation();
      var _this = $(this);
      var checkbox = _this.find('input[type="checkbox"]');
      var em = _this.find("em");
      var checkbox_val = checkbox.prop("checked");

      if(checkbox.prop("checked")){
        checkbox.prop("checked",false);
        em.removeClass("on");
        if(_this.hasClass("all_checked")){
          _this.parent().siblings("li").find('input[type="checkbox"]').prop("checked",false).siblings("em").removeClass("on");

        }else {
          _this.parent().siblings("li").find(".all_checked").find('input[type="checkbox"]').prop("checked",false).siblings("em").removeClass("on");
        }
      }else {
        checkbox.prop("checked",true);
        em.addClass("on");
        if(_this.hasClass("all_checked")){
          _this.parent().siblings("li").find('input[type="checkbox"]').prop("checked",true).siblings("em").addClass("on");
        }
      }

    });


    var flag = true;//营业部
    $('.attr-panl').find('a').click(function() {//多选选中状态
      if($(this).hasClass('current')) {
        $(this).removeClass('current');
      } else {
        $(this).addClass('current');
      }
    });
    $('#partment_content').on('click', '.more', function(event) {//营业部多选更多和收起的切换
      event.preventDefault();
      /* Act on the event */
      if(flag) {
        $(this).html('收起 ').append('<span class="ico-arrow"></span>');
        $('#partment_content').addClass('active');
        $('#partment_content').find('.search-box').show();
        flag = false;
      } else {
        $(this).html('更多 ').append('<span class=""></span>');
        $('#partment_content').removeClass('active');
        $('#partment_content').find('.search-box').hide();
        flag = true;
      }
    });
         //折线统计图模拟
         $('#open_account').highcharts({
           chart: {
            backgroundColor: '#f0f4fb',
            type: 'line'
          },
          title: {
            text: '数据走势', //center
            style: {
              fontFamily: 'Microsoft YaHei',
              color: '#6f7b91',
              fontSize:'20px',
              fontWeight:'bold'
            }
          },
          xAxis: {
           gridLineColor: '#dedede',
           gridLineWidth: 1,
           lineColor: '#3ecacb',
           lineWidth: 2,
           labels: {
            rotation: -30,
            style: {
              fontSize: 12,
              color: '#c0c5ce'
            }
          },
          categories: ['2015/1/1', '2015/1/2', '2015/1/3', '2015/1/4', '2015/1/5', '2015/1/6','2015/1/7', '2015/1/8', '2015/1/9', '2015/1/10', '2015/1/11', '2015/1/12', '2015/1/13', '2015/1/14', '2015/1/15', '2015/1/16', '2015/1/17', '2015/1/18', '2015/1/19', '2015/1/20', '2015/1/21', '2015/1/22', '2015/1/23', '2015/1/24', '2015/1/25', '2015/1/26', '2015/1/27', '2015/1/28', '2015/1/29', '2015/1/30']
        },
        yAxis: {
          min: 0,
          title: {
            text: null
          },
          gridLineColor: '#dedede',
          gridLineWidth: 1,
          lineColor: '#3ecacb',
          lineWidth: 2,
          plotLines: [{
            value: 0,
            width: 1,
            color: '#808080'
          }]
        },
        tooltip: {
          headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
          pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
          '<td style="padding:0"><b>{point.y} 人</b></td></tr>',
          footerFormat: '</table>',
          shared: true,
          useHTML: true
        },
        legend: {
          verticalAlign: 'top',
          y: 25
        },
        series: [{
          name: '注册开户',
          color: '#b897f3',
          data: [1000, 200, 3000, 3002, 2800, 600, 800, 900, 200, 300, 400, 400, 402, 405, 700, 100, 130, 103, 105, 200, 1000, 200, 3000, 3002, 2800, 600, 800, 900, 200, 300]
        }, {
          name: '开户申请',
          color: '#44c1de',
          data: [100, 200, 300, 302, 280, 600, 800, 900, 1200, 300, 400, 400, 402, 505, 600, 140, 130, 103, 105, 200, 1000, 200, 1000, 2002, 2100, 600, 800, 900, 200, 100]
        }, {
          name: '开户成功',
          color: '#e4788c',
          data: [100, 200, 300, 302, 280, 600, 800, 900, 1200, 300, 400, 400, 402, 505, 600, 140, 130, 103, 105, 200, 1000, 200, 1000, 2002, 2100, 600, 800, 900, 200, 100]
        }, {
          name: '开户失败',
          color: '#63a9ff',
          data: [1, 2, 0, 0, 0, 0, 8, 0, 0, 3, 4, 0, 2, 5, 0, 0, 0, 3, 1, 0, 0, 0, 0, 2, 0, 6, 0, 0, 0, 0]
        }]
      });
});
</script>
