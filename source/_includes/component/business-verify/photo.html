<div class="verify-item">
  <h2 class="table-title">身份证照片</h2>
  <a id="edit-activity-photo" class="btn-primary-white pointer">整改<strong class="hl-red">（2）</strong></a>

  <div class="ui-verify-table">
    <div class="back">
      <p class="v-title">身份证反面</p>
      <img class="big-img" src="../../images/pic-back.png" width="120" height="80">

    </div>
    <div class="front">
      <p class="v-title">身份证正面</p>
      <img class="big-img" src="../../images/pic-font.png" width="120" height="80">
    </div>
  </div>
</div>
<script type="text/javascript">
  $(function () {
    $("#edit-activity-photo").click(function () {
      if (!$(this).hasClass('active')) {
        $(this).addClass("active");
        $(".back,.front").addClass('pointer');

        $(".back,.front").click(function () {
          if ($(this).find(".modify-img").length == 0) {
            var newNode = document.createElement('div');
            newNode = '<div class="modify-img">需整改</div>'
            $(this).append(newNode);
            $(this).addClass('invalid');

            $(this).find('.big-img').bind('click', function (event) {
              //点击图片出现大图交互
              event.preventDefault();
              if (event && event.stopPropagation) {
                event.stopPropagation();
              } else {//IE浏览器
                event.cancelBubble = true;
              }
              DIALOG.show({
                dragable: true,
                width: 680,
                title: '',
                mask: false,
                hasBtn: true,
                btnText: ["取消", "保存"],
                btnEvent: ["DIALOG.hide()", "DIALOG.hide()"],
                btnCls: ['btn-cancel', 'btn-confirm  ml-30'],
                html: '<div class="dialog-content-bigimg">' +
                '<div class="big-img" style="width: 350px;height: 350px;">' +
                '<img alt="img" src="../../images/pic-back.png" width="320" height="240">' +
                '</div>' +
                '<div class="operate-img">' +
                '<div class="turn-content">' +
                '<a href="javascript:void(0)"><i></i>旋转</a>' +
                '</div>' +
                '<div>' +
                '<select id="identity" class="diy-select">' +
                '<option value="1">身份证正面</option>' +
                '<option value="2">身份证反面</option>' +
                '</select>' +
                '</div>' +
                '</div>' +
                '</div>'
              });
              $('#identity').diySelect();
            });

          } else {
            var childNode = $(this).find(".modify-img");
            childNode.remove();
            $(this).removeClass('invalid');
            $(this).find('.big-img').unbind();
          }
        })

      } else {
        $(this).removeClass("active");
        $(".back,.front").removeClass('pointer');
        $(".back,.front").unbind();
      }
      return false;
    })
  });
</script>
