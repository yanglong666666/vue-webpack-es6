---
title: 首页
layout: default-iframe
---

<script src="../javascript/moment.js"></script>
<script src="../javascript/fullcalendar.js"></script>
<script type="text/javascript">
    $(function () {
        $('#datepicker').datepicker({
            onSelect: function (selectedDate) {
                console.log(selectedDate);
            },
            changeYear: true,
            changeMonth: true,
            showMonthAfterYear: true,
            dateFormat: "yy-mm-dd",
            yearRange: '1990:2017'
        });

        setTimeout(function () {
            $('.loading-small').hide();
            $('.list-wrap').show();
        }, 5000);


        var currentYear = 2017;
        var currentMonth = 7;
        var calendar_setting_legends = [
            {color: "#FE734A", text: "引入",total:"2"},
            {color: "#F8A20F", text: "开放",total:"3"},
            {color: "#5EAEE3", text: "销售",total:"4"},
            {color: "#B3B3B3", text: "到期",total:"5"}
        ];
        //排序问题，事件排序同一天内我已经修改为按id值的大小排序的，id值越小越在上面；
        // 跨天的按起始时间排序，开始时间早的排在上面；
       // 开始时间相同的跨天的则按结束时间排序，结束时间越晚越排在上面
        var calendar_setting_events = [
            {
                id: 0,
                title: '2个',
                start: '20170612',
                end: '20170619',  //end要多加1天。这里会选中2017-06-12至2017-06-17
                color: "white",
                backgroundColor: calendar_setting_legends[0].color,
                borderColor: calendar_setting_legends[0].color,
                //textColor: "white",
                editable: false
            },
            {
                id: 0,
                title: '2个',
                start: '20170627',
                end: '20170627',
                color: "white",
                backgroundColor: calendar_setting_legends[0].color,
                borderColor: calendar_setting_legends[0].color,
                //textColor: "white",
                editable: false
            },
            {
                id: 1,
                title: '3个',
                start: '20170625',
                end: '20170628',
                color: "white",
                backgroundColor: calendar_setting_legends[1].color,
                borderColor: calendar_setting_legends[1].color,
                //textColor: "white",
                editable: false
            },
            {
                id: 2,
                title: '3个',
                start: '20170626',
                end: '20170628',
                color: "white",
                backgroundColor: calendar_setting_legends[1].color,
                borderColor: calendar_setting_legends[1].color,
                //textColor: "white",
                editable: false
            },
            {
                id: 3,
                title: '4个',
                start: '20170627',
                end: '20170630',
                color: "white",
                backgroundColor: calendar_setting_legends[2].color,
                borderColor: calendar_setting_legends[2].color,
                //textColor: "white",
                editable: false
            },
            {
                id: 4,
                title: '4个',
                start: '20170627',
                end: '20170629',
                color: "white",
                backgroundColor: calendar_setting_legends[2].color,
                borderColor: calendar_setting_legends[2].color,
                //textColor: "white",
                editable: false
            },
            {
                id: 5,
                title: '5个',
                start: '20170627',
                color: "white",
                backgroundColor: calendar_setting_legends[3].color,
                borderColor: calendar_setting_legends[3].color,
                //textColor: "white",
                editable: false
            },
            {
                id: 6,
                title: '5个',
                start: '20170703',
                end: '20170703',
                color: "white",
                backgroundColor: calendar_setting_legends[0].color,
                borderColor: calendar_setting_legends[0].color,
                //textColor: "white",
                editable: false
            },
            {
                id: 7,
                title: '4个',
                start: '20170703',
                end: '20170703',
                color: "white",
                backgroundColor: calendar_setting_legends[1].color,
                borderColor: calendar_setting_legends[1].color,
                //textColor: "white",
                editable: false
            },
            {
                id: 8,
                title: '3个',
                start: '20170703',
                end: '20170703',
                color: "white",
                backgroundColor: calendar_setting_legends[2].color,
                borderColor: calendar_setting_legends[2].color,
                //textColor: "white",
                editable: false
            },
            {
                id: 9,
                title: '2个',
                start: '20170703',
                end: '20170703',
                color: "white",
                backgroundColor: calendar_setting_legends[3].color,
                borderColor: calendar_setting_legends[3].color,
                //textColor: "white",
                editable: false
            },


        ];

        var $calendarWrap = $('#big-calendar-1');
        $calendarWrap.diyFullCalendar({
            width: "540px",
            legends: calendar_setting_legends,
            events: calendar_setting_events,
            onSelected: function (start, end) {
                end.setDate(end.getDate() - 1);
                console.log('start:' + start.getFullYear() + '-' + (start.getMonth() + 1) + '-' + start.getDate());
                console.log('end:' + end.getFullYear() + '-' + (end.getMonth() + 1) + '-' + end.getDate());
            },
            eventAfterAllRender: function (view) {
                currentMonth = view.end._d.getMonth();
            }
        });
        updateLegend();
        $calendarWrap.find('.fc-next-button,.fc-prev-button').on('click', function () {
            console.log(currentYear + '-' + currentMonth);
            //先去掉所有数据
            $calendarWrap.find('.big-calendar').fullCalendar('removeEvents');
            //根据currentYear，currentMonth来调接口，返回数据放入calendar_setting_legends，calendar_setting_events
            //模拟ajax返回后的数据
            calendar_setting_legends = [
                {color: "#FE734A", text: "引入",total:"2"},
                {color: "#F8A20F", text: "开放",total:"3"}
            ];
            calendar_setting_events = [{
                id: 0,
                num: 30,
                title: '30个',
                start: '20170801',
                end: '20170830',
                color: "white",
                backgroundColor: calendar_setting_legends[0].color,
                borderColor: calendar_setting_legends[0].color,
                //textColor: "white",
                editable: false
            }, {
                id: 1,
                num: 2,
                title: '2个',
                start: '20170827',
                end: '20170829',
                color: "white",
                backgroundColor: calendar_setting_legends[1].color,
                borderColor: calendar_setting_legends[1].color,
                //textColor: "white",
                editable: false
            }];
            //渲染数据
            $calendarWrap.find('.big-calendar').fullCalendar('renderEvents', calendar_setting_events);
            updateLegend();
            Dloading({
                text: "正在加载...", //非必需，加载图标下方文字
                timeout: 1000, //非必需, 设置加载失败的超时时间，范围： 0 - ~
                callback: function(){  //执行的跳转、调接口、表单提交
                    //模拟ajax请求
                    setTimeout(function(){
                        hideDloading();
                    },6000);
                }
            });
        });

        function updateLegend() {
            $calendarWrap.find('.calendar-legend-item-wrap').html('');
            calendar_setting_legends.forEach(function (item1) {
                $calendarWrap.find('.calendar-legend-item-wrap').append('<div class="calendar-legend-item"><i style="background-color: ' + item1.color + ' "></i> ' + item1.text + '(' + item1.total + '个) </div>')
            });
            $calendarWrap.find('.calendar-legend-item').on('click', function () {
                var $self2 = $(this);
                $self2.addClass('active').siblings('.calendar-legend-item').removeClass('active');
                $self2.parents('.calendar-legend').siblings('.calendar-content-wrap').find('.calendar-content-item').eq($self2.index()).show().siblings('.calendar-content-item').hide();
            }).eq(0).click();
        }

    });
</script>

<div class="dialog-item-wrap">
    <div class="dialog-item-box-title" style="border: 0;">
        <a class="dia-col-blue" href="system-notice.html">
            【系统升级】12月10日0:00开始系统升级12月10日0:00开始系统升级
        </a>
        <span class="txt-right">2016-12-09 9:30</span>
    </div>
</div>

<h2 class="col-block">我的工作台</h2>
<div class="list-content">
    <ul class="my-work">
        <li>
            <a href="send-application.html">
                <dl class="my-work-list">
                    <dt>
                        <img src="../images/caitong/icon-1.png"/>
                    </dt>
                    <dd>
                        <p class="txt-center">我发出的申请</p>
                    </dd>
                </dl>
            </a>
        </li>
        <li>
            <a href="#">
                <dl class="my-work-list">

                    <dt>
                        <img src="../images/caitong/icon-2.png"/>
                    </dt>
                    <dd>
                        <p class="txt-center">涉及我的申请</p>
                    </dd>
                </dl>
            </a>
        </li>
        <li>
            <a href="#">
                <dl class="my-work-list">

                    <dt>
                        <img src="../images/caitong/icon-3.png"/>
                    </dt>
                    <dd>
                        <p class="txt-center">产品引入</p>
                    </dd>
                </dl>
            </a>
        </li>
        <li>
            <a href="#">
                <dl class="my-work-list">
                    <dt>
                        <img src="../images/caitong/icon-4.png"/>
                    </dt>
                    <dd>
                        <p class="txt-center">产品预热</p>
                    </dd>
                </dl>
            </a>
        </li>
        <li>
            <a href="#">
                <dl class="my-work-list">
                    <dt>
                        <img src="../images/caitong/icon-5.png"/>
                    </dt>
                    <dd>
                        <p class="txt-center">信息发布</p>
                    </dd>
                </dl>
            </a>
        </li>
        <li>
            <a href="#">
                <dl class="my-work-list">
                    <dt>
                        <img src="../images/caitong/icon-6.png"/>
                    </dt>
                    <dd>
                        <p class="txt-center">产品预告</p>
                    </dd>
                </dl>
            </a>
        </li>
    </ul>
</div>

<h2 class="col-block" style="margin-top: 0">产品日历</h2>
<div class="list-content">
    <div id="big-calendar-1">
        <div class="big-calendar"></div>
        <div class="calendar-legend calendar-legend-tab">
            <div class="calendar-legend-item-wrap"></div>
        </div>
        <div class="calendar-content-wrap">
            <div class="calendar-content-item">
                <div class="list-detail">
                    <div class="loading-small">
                        <div class="loading-small-text">正在加载..</div>
                    </div>
                    <div class="list-wrap" style="display:none;">
                        {% include component/card.html %}
                        {% include component/card.html %}
                        {% include component/card.html %}
                        {% include component/card.html %}
                        {% include component/card.html %}
                        {% include component/card.html %}
                    </div>
                    {% include component/pagenav-cf.html %}
                </div>
            </div>
            <div class="calendar-content-item" style="display: none;">
                <div class="list-detail">
                    {% include component/card.html %}
                    {% include component/card.html %}
                    {% include component/card.html %}
                    {% include component/card.html %}
                    {% include component/card.html %}
                    {% include component/card.html %}
                </div>
            </div>
            <div class="calendar-content-item" style="display: none;">
                <div class="list-detail">
                    {% include component/card.html %}
                    {% include component/card.html %}
                    {% include component/card.html %}
                    {% include component/card.html %}
                    {% include component/card.html %}
                    {% include component/card.html %}
                </div>
            </div>
            <div class="calendar-content-item" style="display: none;">
                <div class="list-detail">
                    {% include component/card.html %}
                    {% include component/card.html %}
                    {% include component/card.html %}
                    {% include component/card.html %}
                    {% include component/card.html %}
                    {% include component/card.html %}
                </div>
            </div>
        </div>
    </div>
</div>
